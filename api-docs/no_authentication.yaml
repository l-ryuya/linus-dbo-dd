openapi: 3.1.0
info:
  title: デジタルバックオフィスAPI
  description: |-
    認証不要エンドポイント郡
  version: '0.1'
servers:
  - url: 'https://bizdevforge-backphp.dev.dsbizdev.com/v1'
    description: プロトタイプ環境
paths:
  /country-regions:
    get:
      summary: 国・地域 取得
      parameters:
        - $ref: 'components/parameters.yaml#/components/parameters/AcceptLanguage'
        - name: countryCodeAlpha3
          in: query
          required: false
          schema:
            type: string
        - name: countryCodeAlpha2
          in: query
          required: false
          schema:
            type: string
        - name: countryCodeNumeric
          in: query
          required: false
          schema:
            type: integer
        - $ref: 'components/parameters.yaml#/components/parameters/DisplayPageNumber'
        - $ref: 'components/parameters.yaml#/components/parameters/DisplayedResults'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CountryRegionResponse'
                  'links':
                    $ref: 'components/pagination.yaml#/components/schemas/PaginationLinks'
                  'meta':
                    $ref: 'components/pagination.yaml#/components/schemas/PaginationMeta'
        '422':
          $ref: 'components/error_response.yaml#/components/responses/UnprocessableEntity'
        '500':
          $ref: 'components/error_response.yaml#/components/responses/InternalServerError'
  /misc-data:
    get:
      summary: 汎用テーブル選択肢 取得
      parameters:
        - $ref: 'components/parameters.yaml#/components/parameters/AcceptLanguage'
        - name: type
          description: 選択肢アイテムコード
          in: query
          required: true
          schema:
            type: string
          examples:
            PaymentMethod:
              summary: 支払い方法
              value: payment_method
            PaymentCycle:
              summary: 支払いサイクル
              value: payment_cycle
            WorldRegion:
              summary: 世界地域
              value: world_region
            LanguageCode:
              summary: 言語コード
              value: language_code
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/MiscDataResponse'
        '422':
          $ref: 'components/error_response.yaml#/components/responses/UnprocessableEntity'
        '500':
          $ref: 'components/error_response.yaml#/components/responses/InternalServerError'
  /service-plans:
    get:
      summary: サービス利用プラン 取得
      parameters:
        - $ref: 'components/parameters.yaml#/components/parameters/AcceptLanguage'
        - name: serviceCode
          description: サービスコード
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ServicePlanResponse'
        '422':
          $ref: 'components/error_response.yaml#/components/responses/UnprocessableEntity'
        '500':
          $ref: 'components/error_response.yaml#/components/responses/InternalServerError'
  /service-signup:
    post:
      summary: サービス申込
      parameters:
        - $ref: 'components/parameters.yaml#/components/parameters/AcceptLanguage'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ServiceSignupRequest'
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/ServiceSignupResponse'
        '422':
          $ref: 'components/error_response.yaml#/components/responses/UnprocessableEntity'
        '500':
          $ref: 'components/error_response.yaml#/components/responses/InternalServerError'

components:
  schemas:
    CountryRegionResponse:
      description: 国・地域
      type: object
      properties:
        countryCodeAlpha3:
          type: string
          description: '国コード（ISO 3166-1 alpha-3）'
          example: JPN
        countryCodeAlpha2:
          type: string
          description: '国コード（ISO 3166-1 alpha-2）'
          example: JP
        countryCodeNumeric:
          type: integer
          description: '国コード（ISO 3166-1 numeric）'
          example: 392
        worldRegion:
          type: string
          description: 対象言語に翻訳された世界地域
          example: 日本
        countryRegionName:
          type: string
          description: 対象言語に翻訳された国・地域名称
          example: 日本国
        capitalName:
          type: string
          description: 対象言語に翻訳された首都名称
          example: 東京
    MiscDataResponse:
      description: 選択肢
      type: object
      properties:
        selectionItemType:
          type: string
          description: '選択肢アイテム種別（typeで指定した値）'
        selectionItemCode:
          type: string
          description: 選択肢アイテムコード
        selectionItemName:
          type: string
          description: 選択肢アイテム名称
        selectionItemShortName:
          type: string
          description: 選択肢アイテム短縮名称
    ServicePlanResponse:
      description: サービスプラン
      type: object
      properties:
        serviceCode:
          type: string
          description: サービスコード
        servicePlanCode:
          type: string
          description: サービスプランコード
        servicePlanStatusType:
          type: string
          description: サービスプラン提供ステータス種別
        servicePlanStatus:
          type: string
          description: サービスプラン提供ステータス
        billingCycle:
          type: integer
          description: 請求サイクル（月単位）
        unitPrice:
          type: integer
          description: 料金（円）
        serviceStartDate:
          type: string
          format: date
          description: 提供開始日
        serviceEndDate:
          type: string
          format: date
          nullable: true
          description: 提供終了日
        servicePlanName:
          type: string
          description: サービスプラン名称
        servicePlanDescription:
          type: string
          description: サービスプラン概要
    ServiceSignupRequest:
      description: サービス申込
      type: object
      required:
        - companyName
        - serviceCode
        - servicePlan
        - paymentCycle
        - paymentMethod
        - secondLanguage
        - contactPersonLastName
        - contactPersonFirstName
        - contactPersonEmail
        - contractPersonLastName
        - contractPersonFirstName
        - contractPersonEmail
        - country
        - postalCode
        - state
        - city
        - addressLine1
      properties:
        companyName:
          type: string
          description: 会社名
        departmentName:
          type: string
          description: 部署名
          nullable: true
        serviceCode:
          type: string
          description: サービスコード
          enum:
            - SV-00003
        servicePlan:
          type: string
          description: サービスプランコード
        paymentCycle:
          type: string
          description: 支払いサイクル
        paymentMethod:
          type: string
          description: 支払い方法
        secondLanguage:
          type: string
          description: 複言語コード
        contactPersonLastName:
          type: string
          description: 担当者姓
        contactPersonFirstName:
          type: string
          description: 担当者名
        contactPersonMiddleName:
          type: string
          description: 担当者ミドルネーム
          nullable: true
        contactPersonPosition:
          type: string
          description: 担当者役職
          nullable: true
        contactPersonEmail:
          type: string
          format: email
          description: 担当者メールアドレス
        contractPersonLastName:
          type: string
          description: 契約担当者姓
        contractPersonFirstName:
          type: string
          description: 契約担当者名
        contractPersonMiddleName:
          type: string
          description: 契約担当者ミドルネーム
          nullable: true
        contractPersonPosition:
          type: string
          description: 契約担当者役職
          nullable: true
        contractPersonEmail:
          type: string
          format: email
          description: 契約担当者メールアドレス
        country:
          type: string
          description: 国コード（ISO 3166-1 alpha-3）
        postalCode:
          type: string
          description: 郵便番号
        state:
          type: string
          description: 都道府県/州
        city:
          type: string
          description: 市区町村
        addressLine1:
          type: string
          description: 住所1
        addressLine2:
          type: string
          description: 住所2
          nullable: true
    ServiceSignupResponse:
      description: サービス申込レスポンス
      type: object
      properties:
        contactPersonUserCode:
          type: string
          description: 担当者ユーザーコード
        contractPersonUserCode:
          type: string
          description: 契約担当者ユーザーコード
        companyCode:
          type: string
          description: 会社コード
        serviceContractCode:
          type: string
          description: サービス契約コード
